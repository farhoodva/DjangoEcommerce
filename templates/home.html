{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="page-holder">


<!-- HERO SECTION-->
<div class="container">
    {#        <section class="hero pb-3 bg-cover bg-center d-flex align-items-center" style="background:url({% static 'img/hero-banner.jpg' %})">#}
    {#          <div class="container py-5" >#}
    {#            <div class="row px-4 px-lg-5">#}
    {#              <div class="col-lg-6">#}
    {#                <p class="text-muted small text-uppercase mb-2">New Inspiration 2020</p>#}
    {#                <h1 class="h2 text-uppercase mb-3">20% off on new season</h1><a class="btn btn-dark" href="shop.html">Browse collections</a>#}
    {#              </div>#}
    {#            </div>#}
    {#          </div>#}
    {#        </section>#}
    <!-- CATEGORIES SECTION-->
    <section class="pt-5">
        <header class="text-center">
            <p class="small text-muted small text-uppercase mb-1">Carefully created collections</p>
            <h2 class="h5 text-uppercase mb-4">Browse our categories</h2>
        </header>
        <div class="row">
        {% for category in categories %}
            <div class="col-md-4 mb-4 mb-md-3"><a class="category-item" href="shop.html">
                <img class="img-fluid w-100"  src={{ category.image.url }} alt="">
                <strong class="category-item-title">{{ category.name }}</strong></a>
            </div>

            {% endfor %}
        </div>
    </section>
    <!-- TRENDING PRODUCTS-->
    <section class="py-5">
        <header>
            <p class="small text-muted small text-uppercase mb-1">Made the hard way</p>
            <h2 class="h5 text-uppercase mb-4">Products</h2>
        </header>
        <div class="row">
            <!-- PRODUCT-->
            {% for item in items %}
                {% if item %}
            <div class="col-xl-3 col-lg-4 col-sm-6">
                <div class="product text-center">
                    <div class="position-relative mb-3">
                        <div class="badge text-white badge-">
                        </div>
                        <a class="d-block" href={% url 'core:product_detail' item.slug %}>
                            <img class="img-fluid w-100" src={{ item.image.url }} alt="...">
                        </a>
                        <div class="product-overlay">
                            <ul class="mb-0 list-inline">

                          <li  class="list-inline-item m-0 p-0">
                              <a  class="wish btn-lg " id="id{{ item.pk }}" href={% url 'core:add_remove_to_wishlist' item.slug %}>
                                  {% if request.user in item.wishlist.iterator %}
                                    <i class="fa fa-heart text-danger"></i>
                                  {% else %}
                                     <i class="far fa-heart text-dark"></i>
                                  {% endif %}
                              </a>
                          </li>
{#                                <li class="list-inline-item m-0 p-0">#}
{#                                    <a class="btn btn-sm btn-dark" href="{{ item.get_add_to_cart_url }}">Add to cart</a>#}
{#                                </li>#}
                                <li class="list-inline-item mr-0">
                                    <a class="btn btn-sm btn-outline-dark" href={% url 'core:product_detail' item.slug %}>
{#                                       data-toggle="modal">#}
                                        <i class="fas fa-expand"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <h6><a class="reset-anchor" href="detail.html">{{ item.title}}</a></h6>
                    <p class="small text-muted">${{ item.price }}</p>
                </div>
            </div>
                {% endif %}
            {% endfor %}

        </div>

    {#pagination#}
    {#TODO: fix pagination scroll to top#}
    {% if is_paginated %}
            <nav class="d-flex justify-content-center wow  fadeIn ">
                <ul class="pagination primary mb-0">

                    <!--Arrow left-->
                    {% if page_obj.has_previous %}
                    <li class="page-item ">
                        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo; </span>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    {% endif %}
                    <li class="page-item active">
                        <a class="page-link ">
                            <span >{{ page_obj.number }}</span>
                        </a>
                    </li>

                    {% if page_obj.has_next %}
                    <li class="page-item ">
                        <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    </section>
    <!-- SERVICES-->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row text-center">
                <div class="col-lg-4 mb-3 mb-lg-0">
                    <div class="d-inline-block">
                        <div class="media align-items-end">
                            <svg class="svg-icon svg-icon-big svg-icon-light">
                                <use xlink:href="#delivery-time-1"></use>
                            </svg>
                            <div class="media-body text-left ml-3">
                                <h6 class="text-uppercase mb-1">Free shipping</h6>
                                <p class="text-small mb-0 text-muted">Free shipping worlwide</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-3 mb-lg-0">
                    <div class="d-inline-block">
                        <div class="media align-items-end">
                            <svg class="svg-icon svg-icon-big svg-icon-light">
                                <use xlink:href="#helpline-24h-1"></use>
                            </svg>
                            <div class="media-body text-left ml-3">
                                <h6 class="text-uppercase mb-1">24 x 7 service</h6>
                                <p class="text-small mb-0 text-muted">Free shipping worlwide</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="d-inline-block">
                        <div class="media align-items-end">
                            <svg class="svg-icon svg-icon-big svg-icon-light">
                                <use xlink:href="#label-tag-1"></use>
                            </svg>
                            <div class="media-body text-left ml-3">
                                <h6 class="text-uppercase mb-1">Festival offer</h6>
                                <p class="text-small mb-0 text-muted">Free shipping worlwide</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- NEWSLETTER-->
{#    <section class="py-5">#}
{#        <div class="container p-0">#}
{#            <div class="row">#}
{#                <div class="col-lg-6 mb-3 mb-lg-0">#}
{#                    <h5 class="text-uppercase">Let's be friends!</h5>#}
{#                    <p class="text-small text-muted mb-0">Enter your email for Newsletter </p>#}
{#                </div>#}
{#                <div class="col-lg-6">#}
{#                    <form action="#">#}
{#                        <div class="input-group flex-column flex-sm-row mb-3">#}
{#                            <input class="form-control form-control-lg py-3" type="email"#}
{#                                   placeholder="Enter your email address" aria-describedby="button-addon2">#}
{#                            <div class="input-group-append">#}
{#                                <button class="btn btn-dark btn-block" id="button-addon2" type="submit">#}
{#                                    Subscribe#}
{#                                </button>#}
{#                            </div>#}
{#                        </div>#}
{#                    </form>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </section>#}
{#</div>#}
</div>
</div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
    $(document).ready(function (){

    $('.wish').on('click', function (e) {
        e.preventDefault()
        const url = $(this).attr('href')
        const item_id = $(this).attr('id')
        $.ajax({
                url: url,
                success: function (data) {
                console.log(data)
                if (data.added_to_wishlist === true) {
                    $('#'+item_id).html(`<i class="fa fa-heart text-danger "></i>`)

                } else if (data.added_to_wishlist === false)
                    $('#'+item_id).html(`<i class="far fa-heart text-dark  "></i>`)
            }
        }
    )
})

 })

    </script>
{% endblock %}
